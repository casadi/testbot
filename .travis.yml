env: 
  global: 
    - secure: bOPhFqXlBfwm73ac6BMSba2UR3vwnYVDqyXeAs/5SxrW2hW7/V/MmYLQL3h3BpOYfPBa1ganEAKYrd9K6HWJN16MHyROBEbFpZmZ5DFbK/pUjYaJp+8giSytxWBzEjo2f129azETNgvzjANbpAe0+uYaxupUPvpfQkPPrII+2Jc=

os: linux

dist: trusty
language: generic

matrix:
  include: 
    - env: recipe=ipopt_mingw_trusty compilerprefix=x86_64-w64-mingw32 BITNESS=64
    - env: recipe=ipopt_mingw_trusty compilerprefix=i686-w64-mingw32 BITNESS=32
    - env: recipe=ipopt
    - os: osx
      before_install:
        - recipes/setup.sh
      env: recipe=ipopt_osx
    
    - env: recipe=bonmin_mingw_trusty compilerprefix=x86_64-w64-mingw32 BITNESS=64
    - env: recipe=bonmin_mingw_trusty compilerprefix=i686-w64-mingw32 BITNESS=32
      
    - env: recipe=ecos_mingw_trusty compilerprefix=x86_64-w64-mingw32 BITNESS=64
    - env: recipe=ecos_mingw_trusty compilerprefix=i686-w64-mingw32 BITNESS=32
    - env: recipe=ecos
    - os: osx
      before_install:
        - recipes/setup.sh
      env: recipe=ecos_osx

    - env: recipe=lapack_mingw_trusty compilerprefix=x86_64-w64-mingw32 BITNESS=64
    - env: recipe=lapack_mingw_trusty compilerprefix=i686-w64-mingw32 BITNESS=32
    
    - env: recipe=clang_mingw_trusty compilerprefix=x86_64-w64-mingw32 BITNESS=64
    - env: recipe=clang_mingw_trusty compilerprefix=i686-w64-mingw32 BITNESS=32

    - env: recipe=swig


    
#     - os: osx
#       before_install:
#         - recipes/setup.sh
#       env: recipe=ipopt_osx
#     - os: osx
#       before_install:
#         - recipes/setup.sh
#       env: recipe=clang_osx
#    - os: osx
#      before_install:
#        - recipes/setup.sh
#      env: recipe=ecos_osx
#     - os: osx
#       before_install:
#        - recipes/setup.sh
#      env: recipe=swig_matlab_fixed_osx
#    - env: recipe=ipopt
#     - env: recipe=bonmin
#     - os: osx
#       before_install:
#        - recipes/setup.sh
#       env: recipe=bonmin_osx
#     - env: recipe=bonmin_osx
#     - env: recipe=mingw_bonmin
#     - env: recipe=mingw64_bonmin
#     - env: recipe=snopt75
#
#    - env: recipe=coinhsl
#     - env: recipe=mingw64_coinhsl
#     - env: recipe=mingw_coinhsl
#     - env: recipe=snopt7
#    - env: recipe=swig
#     - os: osx
#       before_install:
#        - recipes/setup.sh
#       env: recipe=swig_matlab_osx
#     - env: recipe=swig_matlab
#     - env: recipe=swig_matlab_fixed
#    - env: recipe=ipopt
#     - env: recipe=mingw_ipopt
#     - env: recipe=mingw64_ipopt
#    - env: recipe=mingw_lapack
#    - env: recipe=mingw64_lapack
#     - env: recipe=mingw64_clang
#     - env: recipe=mingw_clang
#     - env: recipe=clang
#    - env: recipe=mingw64_ecos
#    - env: recipe=mingw_ecos
#    - env: recipe=ecos
#    - env: recipe=gcc47

python:
- "2.7_with_system_site_packages"
compiler: 
  - gcc
before_install:
  - sudo dpkg --add-architecture i386
  - sudo apt-get update -q
  - sudo apt-get install libpython2.7-dev libc6:i386 libncurses5:i386 libstdc++6:i386
  - sudo apt-get update -qq
  - sudo apt-get install -y gcc g++ gfortran
  - source recipes/setup.sh
install: 
  - source shellhelpers && false || allowfail 1 && echo "okay"
  - source recipes/$recipe.sh
script:
  - echo "All is fine"
  
